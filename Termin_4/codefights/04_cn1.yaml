---
task_name: curveNumber1

description: >
   ## Das US-SCS Curve Number Verfahren (Teil 1)
   
   Das Curve Number (CN) Verfahren wurde urspruenglich vom US Soil
   Conservation Service (US-SCS) entwickelt und ist auch heute
   noch weit verbreitet. Der CN-Wert beeinflusst den Ereignisabflussbeiwert
   und wird auf Grundlage von Gebietseigenschaften sowie dem
   Vorereignisniederschlag bestimmt.

   Im ersten Schritt wird die sogenannte "Curve Number" aus der
   Landnutzung und dem Bodentyp ermittelt. Dazu gibt es Tabellenwerke.
   Die folgende Tabelle stellt die CN-Werte fuer urbane Flaechen dar.

   ```
   tab = "LANU1;LANU2;A;B;C;D
   Freiflaeche;geringer Wiesenanteil;68;79;86;89
   Freiflaeche;mittlerer Wiesenanteil;49;69;79;84
   Freiflaeche;hoher Wiesenanteil;39;61;74;80
   Verkehrsflaeche;vollversiegelt;98;98;98;98
   Verkehrsflaeche;offener Wegerand;83;89;92;93
   Verkehrsflaeche;Schotterweg;76;85;89;91
   Verkehrsflaeche;Feldweg;72;82;87;89
   Gewerbeflaeche;Geschaeftsflaeche;89;92;94;95
   Gewerbeflaeche;Industrieflaeche;81;88;91;93
   Wohngebiet;>65% bebaut;77;85;90;92
   Wohngebiet;38% bebaut;61;75;83;87
   Wohngebiet;30% bebaut;57;72;81;86
   Wohngebiet;25% bebaut;54;70;80;85
   Wohngebiet;20%bebaut;51;68;79;84
   Wohngebiet;<12%bebaut;46;65;77;82"
   ```

   Leider erlaubt Codefights keine Datenbereitstellung via URL. 
   Daher muss diese Tabelle zunaechst in den Code kopiert werden.
   Mit den folgenden beiden Zeilen kann man daraus einen
   `data.frame` erzeugen:

   ```
   con = textConnection(tab)
   df = read.table(con, header=TRUE, sep=";", stringsAsFactors=FALSE, strip.white=TRUE)
   ```

   Nutze nun diesen `data.frame`, um aus den folgenden Argumenten 
   den passenden CN-Wert zu ermitteln: Landnutzung Typ 1 (`lanu1`),
   Landnutzung Typ 2 (`lanu2`) und Bodentyp `boden` (kann die Werte "A", "B",
   "C" oder "D" annehmen). Nutze dazu z.B. die `subset` Funktion:

   ```
   subset(df, LANU1==lanu1 & LANU2==lanu2)[,boden]) 
   ```

   #### Beispiel

   Wenn `lanu1=Verkehrsflaeche`, `lanu2=Feldweg` und `boden="B"`, dann
   ist die Kurvennummer *CN=82*.
    
input1:
   name: lanu1
   type: String
   description: Landnutzung Typ 1 

input2:
   name: lanu2
   type: String
   description: Landnutzung Typ 2 (Untertyp) 

input3:
   name: boden
   type: String
   description: Bodentyp (A, B, C oder D) 
   
output:
   type: Integer
   description: CN-Wert fuer den Standort

test1:
   input:
   - "Freiflaeche"
   - "hoher Wiesenanteil"
   - "B"
   output: 61

test2:
   input:
   - "Wohngebiet"
   - "30% bebaut"
   - "A"
   output: 57

test3:
   input:
   - "Verkehrsflaeche"
   - "Feldweg"
   - "A"
   output: 72

test4:
   input:
   - "Freiflaeche"
   - "mittlerer Wiesenanteil"
   - "D"
   output: 84

solution: >
   curveNumber1 = function(lanu1, lanu2, boden) {
     tab = "LANU1;LANU2;A;B;C;D
   	Freiflaeche;geringer Wiesenanteil;68;79;86;89
   	Freiflaeche;mittlerer Wiesenanteil;49;69;79;84
   	Freiflaeche;hoher Wiesenanteil;39;61;74;80
   	Verkehrsflaeche;vollversiegelt;98;98;98;98
   	Verkehrsflaeche;offener Wegerand;83;89;92;93
   	Verkehrsflaeche;Schotterweg;76;85;89;91
   	Verkehrsflaeche;Feldweg;72;82;87;89
   	Gewerbeflaeche;Geschaeftsflaeche;89;92;94;95
   	Gewerbeflaeche;Industrieflaeche;81;88;91;93
   	Wohngebiet;>65% bebaut;77;85;90;92
   	Wohngebiet;38% bebaut;61;75;83;87
   	Wohngebiet;30% bebaut;57;72;81;86
   	Wohngebiet;25% bebaut;54;70;80;85
   	Wohngebiet;20%bebaut;51;68;79;84
   	Wohngebiet;<12%bebaut;46;65;77;82"
     con = textConnection(tab)
     df = read.table(con, header=TRUE, sep=";", stringsAsFactors=FALSE, strip.white=TRUE)
     return(subset(df, LANU1==lanu1 & LANU2==lanu2)[,boden])
   }
   
   
   
   